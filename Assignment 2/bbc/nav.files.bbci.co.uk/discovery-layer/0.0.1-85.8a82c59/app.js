(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var SCROLL_STATS_MODULE_VIEW_THRESHOLD=.5;var SCROLL_STATS_MODULE_VIEW_TIME=2e3;function fractionInViewport(element){var viewportHeight=window.innerHeight;var rect=element.getBoundingClientRect();if(rect.top>0&&rect.bottom<viewportHeight){return 1}else if(rect.top<0&&rect.bottom<0||rect.top>viewportHeight){return 0}else{var belowFold=rect.bottom>viewportHeight;var topVisible=Math.max(0,belowFold?viewportHeight-rect.top:rect.top);var bottomVisible=Math.max(0,belowFold?viewportHeight-rect.bottom:rect.bottom);return(topVisible+bottomVisible)/rect.height}}function dwellCheckFactory(element,dwelledHandler){return function(){if(fractionInViewport(element)<SCROLL_STATS_MODULE_VIEW_THRESHOLD){window.clearTimeout(element.dwellScrollTimeout);delete element.dwellScrollTimeout}else if(!element.dwellScrollTimeout){element.dwellScrollTimeout=window.setTimeout(dwelledHandler,SCROLL_STATS_MODULE_VIEW_TIME)}}}module.exports=dwellCheckFactory},{}],2:[function(require,module,exports){function getLinkData(variant){var discoLayerLink=document.getElementsByClassName("dl-itm")[0];return{variant:variant,statsData:{dl_link_url:discoLayerLink.getAttribute("href"),dl_headline:discoLayerLink.innerText},link:discoLayerLink}}function renderDiscoLayer(discoveryLayerRequest,variant,done){if(discoveryLayerRequest.status===200){var discoBodyHtml=discoveryLayerRequest.responseText;var orbBody=document.getElementById("orb-modules");orbBody.innerHTML=discoBodyHtml+orbBody.innerHTML;done(null,getLinkData(variant))}else{var error=new Error("Unexpected error");done(error)}}function fetchDiscoLayer(contentUrl,variant,done){var discoveryLayerRequest=new XMLHttpRequest;discoveryLayerRequest.onreadystatechange=function(){if(discoveryLayerRequest.readyState===XMLHttpRequest.DONE){renderDiscoLayer(discoveryLayerRequest,variant,done)}};var bucketedContentUrl=contentUrl+"/"+variant+".html";discoveryLayerRequest.open("GET",bucketedContentUrl);discoveryLayerRequest.send();discoveryLayerRequest.onerror=done}function fetchAndRenderDiscoLayer(args,done){var nav=args.nav;var contentUrl=args.contentUrl;var cssUrl=args.cssUrl;var variant=args.variant;if(typeof done!=="function"){done=function(){}}nav.loadCss(cssUrl,function(){fetchDiscoLayer(contentUrl,variant,done)})}module.exports=fetchAndRenderDiscoLayer},{}],3:[function(require,module,exports){var whenToShow=require("./when-to-show");var fetchAndRenderDiscoLayer=require("./fetch-render-disco-layer");var mvt1Events=require("./mvt1Events");var dwellCheckFactory=require("./dwell-check-factory");var CURRENT_EXPERIMENT="DISCO01-Launch";window.define(["orb/nav","istats-1","megavolt-client"],function(nav,istats,megavolt){function usingModernBrowser(){var myNav=navigator.userAgent.toLowerCase();return!(myNav.indexOf("msie")>-1)||parseInt(myNav.split("msie")[1],10)>10}function addDiscoLayerDOMEvents(err,data){if(!err){var clickCallback=mvt1Events.linkClickedFactory(istats,megavolt,data);data.link.addEventListener("click",clickCallback,false);var opts={region:data.link,linkLocation:"discovery-layer",dl_headline:data.statsData.dl_headline};istats.track("internal",opts);var viewedCallback=mvt1Events.discoveryLayerViewedFactory(istats,data);var dwellCheck=dwellCheckFactory(data.link,viewedCallback);window.addEventListener("scroll",dwellCheck,false);window.addEventListener("resize",dwellCheck,false);dwellCheck()}}function runDiscoLayer(shouldShow,contentUrl,cssUrl){if(shouldShow){megavolt.getBuckets({activate:true},function(buckets){var variant=buckets[CURRENT_EXPERIMENT];if(variant){istats.log("target","discovery-layer");if(variant!=="control"){var args={nav:nav,contentUrl:contentUrl,cssUrl:cssUrl,variant:variant};fetchAndRenderDiscoLayer(args,addDiscoLayerDOMEvents)}}})}}function run(contentUrl,cssUrl){if(usingModernBrowser()){whenToShow(function(shouldShow){runDiscoLayer(shouldShow,contentUrl,cssUrl)})}}return{run:run,whenToShow:whenToShow}})},{"./dwell-check-factory":1,"./fetch-render-disco-layer":2,"./mvt1Events":4,"./when-to-show":5}],4:[function(require,module,exports){var CURRENT_EXPERIMENT="DISCO01-Launch";var THREE_MONTHS_MS=80352e5;var addStoredLabel=function(istats,variant,labelSuffix){var storedLabels={};var labelKey="mvt_"+CURRENT_EXPERIMENT+"_"+variant+"_"+labelSuffix;storedLabels[labelKey]="1";istats.addStoredLabels(storedLabels,THREE_MONTHS_MS)};var discoveryLayerViewedFactory=function(istats,data){var triggered=false;return function(){if(!triggered){triggered=true;istats.log("view","discovery-layer",data.statsData);addStoredLabel(istats,data.variant,"target")}}};var linkClickedFactory=function(istats,megavolt,data){var triggered=false;return function(){if(!triggered){triggered=true;istats.log("click","discovery-layer",data.statsData);megavolt.trackEvents("click",function(){});addStoredLabel(istats,data.variant,"conversion")}}};module.exports={linkClickedFactory:linkClickedFactory,discoveryLayerViewedFactory:discoveryLayerViewedFactory}},{}],5:[function(require,module,exports){var assetTypes=["STY","CSP","LIV","LEP","PGL"];var sectionUris=["news/entertainment-arts","news/entertainment_and_arts"];function getSectionUri(){try{return window.config.asset.section.uri}catch(error){return undefined}}function sectionMatches(){var uri=getSectionUri();for(var i=0;i<sectionUris.length;i++){if(uri&&uri.indexOf(sectionUris[i])>-1){return true}}return false}function getViewportWidth(){return document.getElementById("orb-header").offsetWidth}function checkViewportWidth(){var viewportWidth=getViewportWidth();return viewportWidth>=320&&viewportWidth<600}function getAssetType(){return window.config.asset.type}function rightAssetType(){try{var assetType=getAssetType();return assetTypes.indexOf(assetType.toUpperCase())>-1}catch(error){return false}}function checkCookies(){try{return window.bbccookies.cookiesEnabled()&&window.bbccookies.readPolicy("performance")}catch(error){return false}}function getAdvertisingFlags(){return window.config.asset.options.allowAdvertising&&window.config.features2.adverts}function isAdvertisingAllowed(){try{return getAdvertisingFlags()}catch(error){return false}}function isUKUser(done){if(!window.orb.fig.load){window.orb.fig.load=function(callback){callback(window.orb.fig)}}window.orb.fig.load(function(fig){done(fig.geo.isUK())},function(){done(false)})}function whenToShow(done){isUKUser(function(isUK){done(isUK&&sectionMatches()&&checkViewportWidth()&&rightAssetType()&&isAdvertisingAllowed()&&checkCookies())})}module.exports=whenToShow},{}]},{},[3]);